# Docker Publishing Guide

## Current Status

- **Dockerfile**: Present in workspace root
- **Container Registry**: Not published
- **Expected Image**: `ghcr.io/monawlo812/odavl-studio:latest`

## Publishing Steps

### 1. Prerequisites

```bash
# Login to GitHub Container Registry
echo $GHCR_PAT | docker login ghcr.io -u USERNAME --password-stdin

# Or using GitHub CLI
gh auth token | docker login ghcr.io -u $GITHUB_ACTOR --password-stdin
```

### 2. Build & Push

```bash
# Build multi-stage image
docker build -t ghcr.io/monawlo812/odavl-studio:0.3.0 .
docker build -t ghcr.io/monawlo812/odavl-studio:latest .

# Push to registry
docker push ghcr.io/monawlo812/odavl-studio:0.3.0
docker push ghcr.io/monawlo812/odavl-studio:latest
```

### 3. Usage

```bash
# Pull and run
docker pull ghcr.io/monawlo812/odavl-studio:latest

# Run scan on current directory
docker run --rm -v $(pwd):/workspace ghcr.io/monawlo812/odavl-studio:latest scan

# Interactive mode
docker run --rm -it -v $(pwd):/workspace ghcr.io/monawlo812/odavl-studio:latest /bin/sh
```

### 4. GitHub Actions Integration

Add to `.github/workflows/docker.yml`:

```yaml
name: Docker Build & Push
on:
  push:
    tags: ["v*"]
jobs:
  docker:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Build and push
        run: |
          echo ${{ secrets.GITHUB_TOKEN }} | docker login ghcr.io -u ${{ github.actor }} --password-stdin
          docker build -t ghcr.io/monawlo812/odavl-studio:${{ github.ref_name }} .
          docker push ghcr.io/monawlo812/odavl-studio:${{ github.ref_name }}
```

### 5. Authentication Requirements

- **GHCR_PAT**: Personal Access Token with `packages:write` scope
- **Repository**: Must be public or token must have access
- **Permissions**: `contents:read`, `packages:write`

### 6. Image Size Optimization

Current Dockerfile uses multi-stage build:

- **Base**: Node.js Alpine (~100MB)
- **Dependencies**: pnpm install (~200MB)
- **Final**: Production files only (~150MB)

### 7. Security Considerations

- Images are signed with cosign (if configured)
- Vulnerability scanning via Trivy/Snyk
- No secrets in image layers
- Non-root user execution

---

_Generated by GO-FIX stage for launch readiness_
