# GitHub App Installation Checklist

## Overview

ODAVL Studio requires GitHub App installation for automated PR creation, CI monitoring, and repository access.

## Installation Steps

### 1. App Manifest & Registration

- **Manifest Location**: `infra/github-app/manifest.json`
- **Registration URL**: https://github.com/settings/apps/new
- **Upload manifest** to create app automatically

### 2. Required Permissions

#### Repository Permissions

- **Contents**: Read & Write (for code scanning and modifications)
- **Pull Requests**: Read & Write (for automated PR creation)
- **Actions**: Read (for CI workflow monitoring)
- **Metadata**: Read (for repository information)
- **Issues**: Read (for linking related issues)

#### Organization Permissions (Optional)

- **Members**: Read (for team integration)

### 3. Repository Selection

Choose installation scope:

#### Option A: Selected Repositories

- Start with 1-2 pilot repositories
- Verify ODAVL functionality before expanding
- Recommended for initial testing

#### Option B: All Repositories

- Organization-wide deployment
- Requires admin approval in most orgs
- Best for mature ODAVL adoption

### 4. Target Repository Checklist

For each repository where ODAVL will operate:

- [ ] **GitHub Actions enabled** in repository settings
- [ ] **Branch protection** allows automated PRs (if configured)
- [ ] **Required status checks** compatible with ODAVL CI integration
- [ ] **Write access** for the GitHub App installation
- [ ] **`.odavl.policy.yml`** configuration file present (or will be created)

### 5. Post-Installation Genesis Steps

#### Step 1: Initial Configuration

```bash
# Create policy configuration
cp .odavl.policy.yml.sample .odavl.policy.yml

# Edit policy limits for your team
nano .odavl.policy.yml
```

#### Step 2: First Health Scan

```bash
# Install CLI if not already done
npm install -g odavl-cli

# Run initial scan
odavl-cli scan
```

#### Step 3: Test Automated Healing

```bash
# Safe dry-run with minimal changes
odavl-cli heal esm-hygiene --dry-run --max-files 3 --max-lines 20

# Apply if results look good
odavl-cli heal esm-hygiene --apply --max-files 3
```

#### Step 4: Verify CI Integration

```bash
# Test shadow workflow triggering
odavl-cli shadow run --wait

# Check status
odavl-cli shadow status
```

#### Step 5: Create First Automated PR

```bash
# Preview PR creation
odavl-cli pr open --explain --dry-run

# Create actual PR (respects governor limits)
odavl-cli pr open --explain
```

### 6. Team Onboarding

#### Developer Setup

1. **Install VS Code Extension**: Search "ODAVL Studio" in marketplace
2. **Command Palette**: Use `ODAVL Studio: Open Panel`
3. **CLI Access**: `npm install -g odavl-cli` for command line usage

#### Admin Configuration

1. **Set Governor Limits**: Edit `.odavl.policy.yml` daily PR quotas
2. **Define Wave Windows**: Configure automation time windows
3. **Enable Telemetry**: Choose privacy level (off/anonymized/on)

### 7. Monitoring & Maintenance

#### Weekly Health Checks

```bash
# Generate weekly summary
pnpm run weekly

# Check governor status
odavl-cli governor explain

# Review telemetry
cat reports/telemetry.log.jsonl | tail -10
```

#### Monthly Reviews

- Review PR success rates in `reports/` directory
- Adjust governor limits based on team velocity
- Update ODAVL CLI/extension to latest versions
- Review and update healing recipes if needed

### 8. Troubleshooting

#### Common Issues

- **"GitHub App not installed"**: Verify app installation and repository access
- **"PR creation blocked"**: Check governor daily limits with `governor explain`
- **"CI workflows not found"**: Ensure GitHub Actions enabled and workflows present
- **"Permission denied"**: Verify app permissions include Contents: Write

#### Support Resources

- **GitHub Issues**: https://github.com/Monawlo812/odavl_studio/issues
- **Documentation**: https://monawlo812.github.io/odavl_studio/
- **CLI Help**: `odavl-cli --help`

### 9. Security Considerations

#### Principle of Least Privilege

- Install only on repositories that need automated governance
- Review app permissions annually
- Monitor automated changes via PR evidence sections

#### Protected Paths

ODAVL automatically skips sensitive files:

- `security/**` - Security-related configurations
- `*.spec.*` - Test files
- `public-api/**` - Public API definitions

---

_Generated by GO-FIX stage for launch readiness_
